# ADR-003: Safe height and Clearance height in operations

## Status
Legacy / DRAFT

## Context
Each operation is relatively atomic in the context of a job.
The final sequence of job gcode depends on the fixtures selected and the ordering of operations within those fixtures.
Consequently, we need some basic assumptions about where the tool will be located at the beginning and the end of an operation in order to avoid collisions.

## Decision
The operation is responsible for acting on all of the target geometry selected.  For example, a pocket operation may specify multiple
faces to be cleared.  It is the responsibility of the operation to move the cutter into each area, clear it, retract and move to the next.

- Clearance Height shall be assumed to be safe to move laterally at any time with the loaded tool.
- Ambiguous term "Safe height" (safe for what?) shall be renamed OpRapidsHeight to indicate its function.
- OpRapidsHeight shall be assumed to be safe for lateral G0 moves between different cuts within the same operation.
- It is the users responsability to select a suitable value. FreeCAD does not do collision checks on the 3D model. 
- The operation shall rapid (G0) the cutter to Clearance Height at the start of the operation.
- Before acting on any target geometry, the cutter should move at rapid speed to OpRapidsHeight.
- The operation shall end with a G0 <clearance height> to restore the cutter to  clearance in preparation for the next operation.


## Consequences

Advantages
- consistent behavior within and between operations

Disadvantages
- Moves to clearance height between operations may not be as efficient as possible.
- Since this is two rapids between OpRapidsHeight and OpRapidsHeight, machine time penalty is minimal.
- Final refinement should be left to the postprocessor.
